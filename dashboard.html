<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-signin-client_id" content="198434096526-c806a42elrrhvl89g6b581tmjvbonu3n.apps.googleusercontent.com">
  <title>Reefsource</title>
  <meta name="description" content="Using the environment as a firsthand storytelling source">

  <link rel="stylesheet" href="css/foundation.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/fontello.css">
  <link rel="stylesheet" href="css/font-awesome.css">

  <link rel="stylesheet" type="text/css" href="css/log_in_form.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="javascripts/libs.js" type="text/javascript"></script>
  <script>
    // terrificjs bootstrap
    (function($) {
        $(document).ready(function() {
            var $page = $('body');
            var config = {
              dependencyPath: {
                plugin: 'javascripts/'
              }
            }
            var application = new Tc.Application($page, config);
            application.registerModules();
            application.start();


            var listvalues = localStorage.getItem('lists');
			//pase the value
            if (listvalues) {
    			var finalvalue = JSON.parse(listvalues);
                var user_name_first_name = finalvalue.Name.split(" ")[0];
                var user_name_last_name = finalvalue.Name.split(" ")[1];
                var user_email = finalvalue.Email;
                document.getElementById("user-db-button-text").innerHTML = "Hi, " + user_name_first_name;
            }


			// <!-------------------FEB 17--------------->

            // load images

            var apiURL = 'api/sessions/' + sessionId + '/acquisitions';
            $.ajax({
                'type': 'GET',
                url: apiURL,
                headers: headersAPI
            }).then((acquisitions)=>{
            	var count = 0;
                acquisitions.forEach((acq) => {
                	count += 1
                    console.log(acq);
                    acq.files.forEach((f) => {
                        if (f.type == 'image') {
                            var li = document.createElement('li');
                            $('#show_albums ul').append(li);
                            var url = 'api/acquisitions/' + acq._id + '/files/' + f.name + '?ticket=';
                            $.ajax({
                                'type': 'GET',
                                'url': url,
                                'headers': headersAPI
                            }).then((content) => {
                                console.log(content);
                                var div = document.createElement('div');
                                var img = document.createElement('img');
                                var p = document.createElement('p');
                                // var for_p = 'api/acquisitions/' + acq._id + '/files/' + f.name
                                console.log("text");
                                // var metadata = apiURL + '?info=true';
                                // console.log('?info=tru);

                                p.innerHTML = f.name;
                                p.className += " imgDescription";
                                div.className += " image-container";
                                div.className += " imgWrap";
                                img.src = url + content.ticket;
                                div.append(p);
                                div.append(img);
                                li.append(div);
                            });
                        }
                    });
                })
                document.getElementById("total_contribute_image").innerHTML = "You have uploaded " + count + " images to us. Hooray!"
            });
            // <!-----------------Feb 17----------------->
        });
    })(Tc.$);
  </script>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,700,300" media="screen" rel="stylesheet" type="text/css" />
  <script src="javascripts/masonry.pkgd.js" type="text/javascript"></script>
  <script src="javascripts/imagesloaded.pkgd.min.js" type="text/javascript"></script>
  <script src="javascripts/slick.min.js" type="text/javascript"></script>

  <link rel="canonical" href="http://coralreefsource.org">
  <link rel="alternate" type="application/rss+xml" title="Reefsource" href="http://coralreefsource.org/feed.xml" />
  <!--Google Analytics START-->

  <!--Google Analytics END-->

</head>


  <body>

      <a id='top'></a>
<div class='contain-to-grid sticky fullwidth'>
  <nav class='top-bar onepage' data-options='sticky_on: large' data-topbar=''>
    <ul class='title-area'>
      <li class='name'>
        <h1>
          <a href="index.html">
            <img alt="" src="images/Reefsource_logo_v1.png" />
          </a>
        </h1>
      </li>
      <li class='toggle-topbar menu-icon'>
        <a href='#'>Menu</a>
      </li>
    </ul>
    <section class='top-bar-section'>
      <ul class='right'>



      		<li>
            	<a href="index.html">HOME</a>
            </li>
            <li>
            	<a href="#user_profile" id="user-db-button-text" data-dropdown="hover1" data-options="is_hover:true;" class="user_db_button" style="border:2px solid #343c55;background-color: #343c55;color: lightgrey;">LOG IN</a>
              </a>
              <ul id="hover1" class="f-dropdown" data-dropdown-content>
              	<li><a href="#upload" class="upload-btn-nav" onclick="document.getElementById('upload-btn').style.display='block'" style="border:2px solid #343c55;background-color: #343c55;color: lightgrey;">
              		UPLOAD IMAGES
              	</a></li>
                <li><a href="index.html" onclick="signOut();">Sign Out</a></li>
              </ul>
            </li>

<!--           	<li>

            </li> -->
<!--             <li>
            	<a href="" onclick="signOut();">Sign Out</a>
            </li> -->
      </ul>
    </section>
  </nav>
</div>

<script type="text/javascript">

	  function signOut(){
	  	// window.location = "https://google.com"
	  	document.getElementById("user-db-button-text").style.display = "none";
		window.location.href = "https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=https://reefsource.github.io";
	  }

</script>


<!-- --------------------FEB 16--------------------- -->
<div class='bg' style='background-image: url(images/newgrid_pic.png); width: 100%; height: 30%; background-size: cover; background-repeat: repeat;'>
	<div id="total_contribute_image" style="color:#343c55;font-size: 2rem;text-align: center; padding-top: 4%; position: relative;">You have uploaded 100 images to us. Hooray!</div>
	<div style="text-align: center;">
	<button class="button round" onclick="document.getElementById('upload-btn').style.display='block'" style="width: auto;margin: 2% auto;">UPLOAD IMAGES</button>
</div>
</div>


<div class="row" style="padding-top: 2%;">
	<div class="large-6 columns" style="text-align: right;">
		<label style="text-align: center;">Filter by Location</label>
	    <select style="width: 60%; text-align: center;">
	        <option value="None">None</option>
	        <option value="Australia">Australia</option>
	        <option value="India">India</option>
	        <option value="Mediterran">Mediterran</option>
	        <option value="United States">United States</option>
         </select>
    </div>
	<div class="large-6 columns" style="text-align: left;">
		<label style="text-align: left;">Filter by Date</label>
	    <select style="width: 60%; text-align: center;">
	        <option value="None">None</option>
	        <option value="12/03/2016">12/03/2016</option>
	        <option value="12/01/2016">12/01/2016</option>
	        <option value="11/15/2016">11/15/2016</option>
	        <option value="10/05/2016">10/05/2016</option>
         </select>
    </div>
</div>

<div id="show_albums" class="row" style=" text-align:center; padding-left: 3%;padding-top: 2%; padding-bottom: 2%;">
	<ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">

	</ul>
</div>


<div id="upload-btn" class="modal">

	<div class="upload-modal-content animate" action="action_page.php">
			<!-- --------------------FEB 19--------------------- -->
			<!-- <section class="content"> -->
  <!-- <h1 class="content__heading">Send Me a Message</h1> -->
  <!-- <p class="content__lede">Use this handy contact form to get in touch with me.</p> -->
  <form class="content__form contact-form" action="">
  	<div class="row">
		<div class="large-6 columns">
			<div class="image-input-box-no" id="image-input-box-no">
				<div id="drag-text" style="text-align: center;margin-top: 20%;margin-bottom: 20%; opacity: 0.8; color: grey;">
					<p style="font-size: 1.5rem; font-weight: 4px;margin-left: 5%;margin-right: 5%;" id="notification">Now we only accpet <strong>1 image in a single upload.</strong> Sorry about the inconvenience.</p>
				<!-- 	<p style="margin-left: 5%;margin-right: 5%;">We would appreciate if you drag the images captured in the same day and from the same location.</p></p> -->
					<div id="disappear">
					  	<div class="testing">
					  		<label for="image_upload" class="button round"> Choose from path.</label>
					  	</div>
					  	<div>
					      <input id="image_upload" name="image_upload" type="file" required style="visibility: hidden;display: none;" />
					    </div>
				    </div>
				</div>
			</div>
		</div>
		<div class="large-6 columns">
			<div class="image-input-box-no" id="image-input-box-no">
			<div style="margin-left: 5%;margin-right: 5%;">
			<br>
		  	<div class="testing">
		  		<div class="row" style="">
					<div class="small-6 columns">
						<span style="color: grey;">Longitude: *</span>
						<input id="longitude" name="longitude" type="text"/ required>
		      <!-- <p>Longitude: * </p> -->
		      		</div>
		      		<div class="small-6 columns">
						<span style="color: grey;">Latitude: *</span>
						<input id="latitude" name="latitude" type="text"/ required>
		      <!-- <p>Longitude: * </p> -->
		      		</div>
		      	</div>
		    </div>
		    <br>
		    <div class="row">
				<div class="large-12 columns">
			        <span style="color: grey; font-weight: 3px;">What's the coral type?(optional)</span>
			    </div>
			</div>
		    <div>
		      <input id="coral_type_Branching" name="coral_type" type="radio" value="Branching"/>
		      <label style="color: grey; font-weight: 3px;" for="coral_type_Branching">Branching</label>
		      <input id="coral_type_Boulder" name="coral_type" type="radio" value="Boulder"/>
		      <label style="color: grey; font-weight: 3px;" for="coral_type_Boulder">Boulder</label>
		      <input id="coral_type_Plate" name="coral_type" type="radio" value="Plat"/>
		      <label style="color: grey; font-weight: 3px;" for="coral_type_Plate">Plate</label>
		      <input id="coral_type_Soft" name="coral_type" type="radio" value="Soft"/>
		      <label style="color: grey; font-weight: 3px;" for="coral_type_Soft">Soft</label>
		    </div>
		    <div class="row">
				<div class="large-12 columns">
			        <span style="color: grey; font-weight: 3px;">What is the brightness of the brightest part of the coral? (optional)</span>
			    </div>
			</div>
		    <div>
		      <input id="brightest_1" name="brightest" type="radio" value="1"/>
		      <label style="color: grey; font-weight: 3px;" for="brightest_1">1</label>

		      <input id="brightest_2" name="brightest" type="radio" value="2"/>
		      <label style="color: grey; font-weight: 3px;" for="brightest_2">2</label>

		      <input id="brightest_3" name="brightest" type="radio" value="3"/>
		      <label style="color: grey; font-weight: 3px;" for="brightest_3">3</label>

		      <input id="brightest_4" name="brightest" type="radio" value="4"/>
		      <label style="color: grey; font-weight: 3px;" for="brightest_4">4</label>

		      <input id="brightest_5" name="brightest" type="radio" value="5"/>
		      <label style="color: grey; font-weight: 3px;" for="brightest_5">5</label>

		      <input id="brightest_6" name="brightest" type="radio" value="6"/>
		      <label style="color: grey; font-weight: 3px;" for="brightest_6">6</label>
		    </div>

		    <div class="row">
				<div class="large-12 columns">
			        <span style="color: grey; font-weight: 3px;">What is the brightness of the darkest part of the coral? (optional)</span>
			    </div>
			</div>
		    <div >
		      <input id="darkest_1" name="darkest" type="radio" value="1"/>
		      <label style="color: grey; font-weight: 3px;" for="darkest_1">1</label>

		      <input id="darkest_2" name="darkest" type="radio" value="2"/>
		      <label style="color: grey; font-weight: 3px;" for="darkest_2">2</label>

		      <input id="darkest_3" name="darkest" type="radio" value="3"/>
		      <label style="color: grey; font-weight: 3px;" for="darkest_3">3</label>

		      <input id="darkest_4" name="darkest" type="radio" value="4"/>
		      <label style="color: grey; font-weight: 3px;" for="darkest_4">4</label>

		      <input id="darkest_5" name="darkest" type="radio" value="5"/>
		      <label style="color: grey; font-weight: 3px;"  for="darkest_5">5</label>

		      <input id="darkest_6" name="darkest" type="radio" value="6"/>
		      <label style="color: grey; font-weight: 3px;" for="darkest_6">6</label>

		    </div>

		    <input name="secret" type="hidden" value="1b3a9374-1a8e-434e-90ab-21aa7b9b80e7"/>
		    </div>
			</div>
		</div>
		<button class="button round" type="submit" id="send_btn" style="margin-top: 2%;width: 50%; margin-left: 25%; margin-right: 25%;">Send It!</button>
    </div>
  </form>
<!-- </section> -->
</div>
		</div>
	</div>
</div>

<script type="text/javascript">

	(function(){

		document.getElementById("image_upload").addEventListener("change", function() {
			if (this.files.length > 0){
				document.getElementById("notification").innerHTML = "<strong>1 image</strong> was selected. Please fill in the related information on right side."
				// document.getElementById("path_note").style.display = "none";
				document.getElementById("disappear").style.display = "none";
			}
		});


		//-------------------------------------------------------------------------
		//-------------------------------------------------------------------------
		//-------------------------------------------------------------------------
		// <!-- -------------------Not being used for now.------------------------>
		//-------------------------------------------------------------------------
		//-------------------------------------------------------------------------
		//-------------------------------------------------------------------------

		// var dropzone = document.getElementById("image-input-box");

		// dropzone.ondrop = function(e){
	 //      e.preventDefault();
	 //      this.className = 'image-input-box';
	 //      document.getElementById("drag-text").style.color = "grey";
	 //      if(e.dataTransfer.files.length == 1){
	 //      	document.getElementById("notification").innerHTML = "An image was selected. Please fill in the related information on right side."
	 //      	// document.getElementsById([0.setAttribute("class", "democlass");
	 //      	document.getElementById("disappear").style.display = "none";
	 //      }

	 //    };
		// dropzone.ondragover = function(){
		// 	document.getElementById("drag-text").style.color = 'black';
		// 	this.className = 'image-input-box dragover';
		// 	return false;
		// }
		// dropzone.ondragleave = function(){
		// 	this.className = 'image-input-box';
		// 	document.getElementById("drag-text").style.color = "grey";
		// 	return false;
		// }
	}());
</script>


<script>
// Get the modal
var modal = document.getElementById('upload-btn');
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>

<div class='full no-padding' style='background: #4D4F53; color: #fff'>
  	<div class='two spacing'></div>
  	<div class='row'>
    	<div class='large-12 columns'>
      	<p>©2016/2017 Reefsource, a Brown Institute for Media Innovation Magic Grantee.</p>
    	</div>
  	</div>
  	<div class='spacing'></div>
	</div>
</div>

<script type="text/javascript" src="javascripts/upload_image.js" ></script>

<script src="javascripts/jquery.countTo.js" type="text/javascript"></script>
<script src="javascripts/jquery.appear.js" type="text/javascript"></script>
<script src="javascripts/jquery.validate.js" type="text/javascript"></script>
<script src="javascripts/jquery.sequence-min.js" type="text/javascript"></script>
<script src="javascripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="javascripts/app.js" type="text/javascript"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
</body>

</html>
